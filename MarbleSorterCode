#pragma config(Sensor, in1,    f1,             sensorLineFollower)
#pragma config(Sensor, in2,    f2,             sensorLineFollower)
#pragma config(Sensor, dgtl1,  eCode,          sensorQuadEncoder)
#pragma config(Sensor, dgtl3,  but1,           sensorTouch)
#pragma config(Sensor, dgtl10, ,               sensorTouch)
#pragma config(Sensor, dgtl11, ,               sensorTouch)
#pragma config(Motor,  port2,           door,          tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port3,           belt,          tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port4,           plas,          tmotorServoStandard, openLoop)
#pragma config(Motor,  port5,           wood,          tmotorServoStandard, openLoop)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

bool toggle = false;
int toggleLast = 0;

int lineF;
int _but1;

int woodMax = 1800;    // sensor readings
int woodMin = 1500;
int woodVal = 0;

int plasMax = 2400;
int plasMin = 2100;
int plasVal = 0;

int timer = 0;
task main()
{
	while(true){
		_but1 = SensorValue[but1];							// makes button work
		if(_but1 == 1 && _but1 != toggleLast){
			toggle = !toggle;
		}

		toggleLast = _but1;

		if(toggle){
			lineF = SensorValue[f1];
			timer++;
			motor[belt] = -25;

			if(lineF > woodMin && lineF < woodMax && timer > 100){
				plasVal = 90;
				woodVal = 0;
				timer = 0;
			}
			else if(lineF > plasMin && lineF < plasMax && timer > 100){
				plasVal = 0;
				woodVal = 90;
				timer = 0;
			}
			else if (timer > 1000){
				plasVal = 0;
				woodVal = 0;
				timer = 0;
			}
			if(timer > 200 && timer < 240){
				motor[door] = 30;
			}
			else{
				motor[door] = 0;
			}

			setServo(plas, plasVal);			// tells material values for motor
			setServo(wood, woodVal);

		}
		else{
			motor[belt] = 0;

		}
		wait1Msec(5);
	}
}
